<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="generator" content="Jekyll">

  <title>CyberInfra</title>

  <link rel="stylesheet" href="/css/main.css">
  
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /> <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>CyberInfra | Sistemas Operacionais, Redes de Computadores, Cibersegurança…</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="CyberInfra" />
<meta name="author" content="Luiz Arthur Feitosa dos Santos" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Sistemas Operacionais, Redes de Computadores, Cibersegurança…" />
<meta property="og:description" content="Sistemas Operacionais, Redes de Computadores, Cibersegurança…" />
<link rel="canonical" href="https://luizsantos.github.io/cyberinfra//docs/penTest/pentest" />
<meta property="og:url" content="https://luizsantos.github.io/cyberinfra//docs/penTest/pentest" />
<meta property="og:site_name" content="CyberInfra" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CyberInfra" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Luiz Arthur Feitosa dos Santos"},"url":"https://luizsantos.github.io/cyberinfra//docs/penTest/pentest","@type":"WebPage","description":"Sistemas Operacionais, Redes de Computadores, Cibersegurança…","headline":"CyberInfra","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WJPJ7DKEWG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WJPJ7DKEWG');
</script>

  
<body>
  <div id="wrapper">
    <header>
  <div>
    <a href="/">
    
    <h1>luiz@CyberInfra:~#</h1>
    </a>
    <h3>Sistemas Operacionais, Redes de Computadores, Cibersegurança...</h3>
    <div class="header-links">
      <a href="/docs"><h2 class="header-link">Documentos</h2></a>
<a href="/videos"><h2 class="header-link">Videos</h2></a>
<a href="/archive"><h2 class="header-link">Postagens</h2></a>
<a href="/about"><h2 class="header-link">Sobre</h2></a>
<!-- <a href="/atom.xml"><h2 class="header-link">RSS</h2></a> -->

    </div>
  </div>
</header>

    <div class="container">
      <section id="main_content">
        <article>
  <h1 id="pentest">PenTest</h1>

<blockquote>
  <p><strong>UTFPR - Universidade Tecnológica Federal do Paraná, campus Campo Mourão</strong><br />
Autor: <strong>Prof. Dr. Luiz Arthur Feitosa dos Santos</strong><br />
E-mail: <strong><a href="mailto:luizsantos@utfpr.edu.br">luizsantos@utfpr.edu.br</a></strong></p>
</blockquote>

<h1 id="enumeração">Enumeração</h1>

<p>Formas de fazer enumeração:</p>

<ol>
  <li>A primeira e mais fácil/banal é utilizando o serviço e capturando o <em>banner</em>:</li>
</ol>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>ftp 192.168.56.104
<span class="go">Connected to 192.168.56.104 (192.168.56.104).
220 (vsFTPd 2.3.4)
Name (192.168.56.104:luiz):
</span></code></pre></div></div>

<p>ou</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>telnet 192.168.56.104 21
<span class="go">Trying 192.168.56.104...
Connected to 192.168.56.104.
Escape character is '^]'.
220 (vsFTPd 2.3.4)
</span></code></pre></div></div>
<p>ou</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>nc 192.168.56.104 21
<span class="go">220 (vsFTPd 2.3.4)
USER
331 Please specify the password.
USER ftp
331 Please specify the password.
PASS ftp
</span></code></pre></div></div>

<ol>
  <li>Dá para obter os banners de forma automatizada, tal como:</li>
</ol>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>nmap <span class="nt">--script</span> banner 192.168.56.104
<span class="go">Starting Nmap 7.70 ( https://nmap.org ) at 2020-03-15 00:13 UTC
Nmap scan report for 192.168.56.104
Host is up (0.00041s latency).
Not shown: 977 closed ports
PORT     STATE SERVICE
21/tcp   open  ftp
|_banner: 220 (vsFTPd 2.3.4)
22/tcp   open  ssh
|_banner: SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1
23/tcp   open  telnet
</span><span class="gp">|_banner: \xFF\xFD\x18\xFF\xFD \xFF\xFD#</span><span class="se">\x</span>FF<span class="se">\x</span>FD<span class="s1">'
</span><span class="go">25/tcp   open  smtp
|_banner: 220 metasploitable.localdomain ESMTP Postfix (Ubuntu)
53/tcp   open  domain
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
|_banner: \x01Where are you?
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
</span><span class="gp">|_banner: root@metasploitable:/#</span><span class="w">
</span><span class="go">2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
|_banner: 220 ProFTPD 1.3.1 Server (Debian) [::ffff:192.168.56.104]
3306/tcp open  mysql
</span><span class="gp">| banner: &gt;</span><span class="se">\x</span>00<span class="se">\x</span>00<span class="se">\x</span>00<span class="se">\x</span>0A5.0.51a-3ubuntu5<span class="se">\x</span>00<span class="se">\x</span>09<span class="se">\x</span>00<span class="se">\x</span>00<span class="se">\x</span>00Z~-c,O<span class="k">*</span><span class="c">#\x</span>
<span class="go">|_00,\xAA\x08\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\...
5432/tcp open  postgresql
5900/tcp open  vnc
|_banner: RFB 003.003
6000/tcp open  X11
6667/tcp open  irc
| banner: :irc.Metasploitable.LAN NOTICE AUTH :*** Looking up your hostna
|_me...
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 08:00:27:BE:C0:C2 (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 15.49 seconds
</span></code></pre></div></div>
<blockquote>
  <p>Os scripts do nmap estão normalmente disponível no diretório do nmap, tal como <code class="language-plaintext highlighter-rouge">/usr/share/nmap/scripts/</code>. Para saber o que o <code class="language-plaintext highlighter-rouge">script</code> faz e como utilizar execute <code class="language-plaintext highlighter-rouge">nmap --script-help nome</code>, onde se deve trocar <code class="language-plaintext highlighter-rouge">nome</code> pelo nome do <code class="language-plaintext highlighter-rouge">script</code>.</p>
</blockquote>

<ol>
  <li>Usando fingerprint - que é o método mais confiável, remotamente:</li>
</ol>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>nmap <span class="nt">-sV</span> 192.168.56.104 
<span class="go">Starting Nmap 7.70 ( https://nmap.org ) at 2020-03-15 00:07 UTC
Nmap scan report for 192.168.56.104
Host is up (0.00039s latency).
Not shown: 977 closed ports
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 2.3.4
22/tcp   open  ssh         OpenSSH 4.7p1 Debian 8ubuntu1 (protocol 2.0)
23/tcp   open  telnet      Linux telnetd
25/tcp   open  smtp        Postfix smtpd
53/tcp   open  domain      ISC BIND 9.4.2
80/tcp   open  http        Apache httpd 2.2.8 ((Ubuntu) DAV/2)
</span><span class="gp">111/tcp  open  rpcbind     2 (RPC #</span>100000<span class="o">)</span>
<span class="go">139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
512/tcp  open  exec        netkit-rsh rexecd
513/tcp  open  login?
514/tcp  open  shell?
1099/tcp open  rmiregistry GNU Classpath grmiregistry
1524/tcp open  bindshell   Metasploitable root shell
</span><span class="gp">2049/tcp open  nfs         2-4 (RPC #</span>100003<span class="o">)</span>
<span class="go">2121/tcp open  ftp         ProFTPD 1.3.1
3306/tcp open  mysql       MySQL 5.0.51a-3ubuntu5
5432/tcp open  postgresql  PostgreSQL DB 8.3.0 - 8.3.7
5900/tcp open  vnc         VNC (protocol 3.3)
6000/tcp open  X11         (access denied)
6667/tcp open  irc         UnrealIRCd
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
8180/tcp open  http        Apache Tomcat/Coyote JSP engine 1.1
MAC Address: 08:00:27:BE:C0:C2 (Oracle VirtualBox virtual NIC)
</span><span class="gp">Service Info: Hosts:  metasploitable.localdomain, localhost, irc.Metasploitable.LAN;</span><span class="w"> </span>OSs: Unix, Linux<span class="p">;</span> CPE: cpe:/o:linux:linux_kernel
<span class="go">
Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 152.00 seconds
</span></code></pre></div></div>

<h1 id="descobrindo-o-sistema-operacional">Descobrindo o sistema operacional</h1>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>nmap <span class="nt">-O</span> 192.168.56.104
<span class="go">Starting Nmap 7.70 ( https://nmap.org ) at 2020-03-15 00:05 UTC
Nmap scan report for 192.168.56.104
Host is up (0.00026s latency).
Not shown: 977 closed ports
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
53/tcp   open  domain
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
3306/tcp open  mysql
5432/tcp open  postgresql
5900/tcp open  vnc
6000/tcp open  X11
6667/tcp open  irc
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 08:00:27:BE:C0:C2 (Oracle VirtualBox virtual NIC)
Device type: general purpose
Running: Linux 2.6.X
OS CPE: cpe:/o:linux:linux_kernel:2.6
OS details: Linux 2.6.9 - 2.6.33
Network Distance: 1 hop

OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 1.87 seconds
</span></code></pre></div></div>
<blockquote>
  <p>Atenção, cruzando os dados obtidos com a enumeração de serviços por <em>banner</em> com a enumeração por <em>banner</em> é possível ter mais certeza a respeito do serviço real que está em execução em cada porta.</p>
</blockquote>

<h1 id="pesquisando-os-vulnerabilidades-para-os-softwares-descobertos-na-enumeração">Pesquisando os vulnerabilidades para os softwares descobertos na enumeração:</h1>

<ol>
  <li>O método mais comum é pesquisando no Google utilizando como entrada o <em>banner</em> obtido, tal como <code class="language-plaintext highlighter-rouge">ProFTPD 1.3.1</code>.</li>
</ol>

<p>Dentro das pesquisas dois sítios que serão retornados nestas buscas dois que são bem úteis são:</p>

<ul>
  <li><a href="https://www.securityfocus.com">https://www.securityfocus.com</a> - Esse é mais focado em dar descrições a respeito da vulnerabilidade,</li>
  <li><a href="https://www.exploit-db.com">https://www.exploit-db.com</a> - Esse normalmente fornece o <em>exploit</em>.</li>
</ul>

<ol>
  <li>Também dá para usar o Nessus/OpenVAS</li>
</ol>

</article>
      </section>
    </div>
  </div>

   <footer>
  <a href="https://creativecommons.org/licenses/by-nc/3.0/deed.en_US">
    <span>
        <b>Luiz Arthur Feitosa dos Santos</b>
    </span>
    
    <span>© 2021</span>
  </a>
</footer>


</body>

</html>
